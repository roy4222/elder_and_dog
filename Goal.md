
---

# Go2 機器狗智慧尋物系統 - 完整修正計畫書

## 專題名稱：基於 Go2 機器狗的智慧陪伴與尋物系統
**修訂日期：** 2025年11月16日
**專題目標：** 結合機器狗移動平台、ROS2 導航系統及 Google Gemini Robotics VLM，開發一個具備自主導航、環境感知和指定物品尋獲能力的智慧尋物系統。

---

## I. 專案願景與核心價值

### 1. 願景
讓 Go2 機器狗成為家庭環境中**實用**、**自主**的物品尋回助手，尤其能幫助高齡者或行動不便者解決日常找尋物品的困擾。

### 2. 核心技術棧 (修正後)

| 功能領域 | 核心技術 | 備註 (為何選擇) |
| :--- | :--- | :--- |
| **機器狗平台** | Unitree Go2 (實機) | 穩定、具備基本感測器與 SDK 支援。 |
| **作業系統** | Ubuntu 22.04 + **ROS2 Humble** | 業界標準，提供模組化開發框架。 |
| **模擬環境** | **Isaac Sim (Orbit)** | 提供高擬真數位孿生，**取代原規劃的非官方 SDK 串接**。 |
| **自主導航** | **ROS2 Nav2** + **slam\_toolbox** | 成熟的 SLAM 與導航套件。 |
| **智慧視覺** | **Gemini Robotics (VLM)** | 具備強大的零樣本 (Zero-shot) 物體辨識與空間推理能力。 |

---

## II. 修正後的技術架構 (VLM 導向)

### 1. 軟硬體分層架構圖

```mermaid
graph TD
    subgraph S["系統前端 (Web 介面)"]
        A[使用者指令 (找眼鏡)] --> B(ROS2 Web Bridge / WebSocket)
        C[即時影像串流] --> B
        D[地圖與結果標示] --> B
    end
    
    subgraph R["ROS2 核心節點 (伺服器 / 虛擬機)"]
        B --> E[尋物邏輯節點]
        G[攝影機 2D 圖像] --> H(VLM 處理節點)
        F[LiDAR 點雲數據] --> I(座標轉換節點)
        E --> J(Nav2 導航堆棧)
        J --> K[運動控制指令]
        H --> L(2D 圖像座標)
        L --> I
        I --> E
        I --> M(3D 世界座標)
    end
    
    subgraph G["Go2 機器狗 (實機 / Isaac Sim)"]
        K --> O[Go2 運動控制器]
        O --> P(實機 Go2)
        P --> F
        P --> G
        O --> Q(Isaac Sim 數位孿生)
        Q --> F
        Q --> G
    end
```

### 2. 關鍵流程：圖像座標到世界座標的轉換 (步驟 D)

這是系統成功的關鍵。

1.  **輸入：** VLM 輸出 $\rightarrow$ 圖像上的 2D 像素座標 $[u, v]$。
2.  **深度計算：** 讀取同時間 LiDAR 數據或深度攝影機獲取的深度圖 $Z(u, v)$。
3.  **座標轉換：** 利用攝影機的**內參矩陣** $K$ (Intrinsic Matrix) 和深度 $Z$，將 $[u, v]$ 轉換為 Go2 本體座標系下的 3D 座標 $[x, y, z]$。
    $$
    \begin{bmatrix} x \\ y \\ z \end{bmatrix} = Z \cdot K^{-1} \cdot \begin{bmatrix} u \\ v \\ 1 \end{bmatrix}
    $$
4.  **世界轉換：** 使用 ROS2 `tf2`，將本體座標 $[x, y, z]$ 轉換為 SLAM 地圖上的**世界座標** $[X_w, Y_w, Z_w]$。
5.  **輸出：** 3D 世界座標 $\rightarrow$ 作為 Nav2 的導航目標點。

---

## III. 4 個月分階段時程規劃 (以週為單位)

### 第 1 個月：基礎建設與環境學習

| 週次 | 任務重點 | 成果里程碑 |
| :--- | :--- | :--- |
| **W1** | **環境配置 (ROS2 + SDK)** | [✅] 所有成員完成環境配置，確認 GPU 伺服器規格。 |
| **W2** | **實機基本功能測試** | [✅] Go2 運動控制、所有感測器數據 (LiDAR/Camera/IMU) 串流驗證。 |
| **W3** | **SLAM 基礎測試** | [✅] 使用 `slam_toolbox` 在簡單環境完成 SLAM 建圖、地圖保存與載入。 |
| **W4** | **Isaac Sim 入門與整合** | [✅] 完成 Isaac Sim 安裝，執行 `go2_omniverse` 範例，確認 ROS2 橋接正常。 |

### 第 2 個月：核心功能開發 (Nav2 + VLM)

| 週次 | 任務重點 | 成果里程碑 |
| :--- | :--- | :--- |
| **W5** | **Nav2 導航與避障** | [✅] 完成複雜地圖的自主導航與動態避障測試，記錄成功率。 |
| **W6** | **Gemini VLM API 整合** | [✅] 程式碼整合 Gemini Robotics API，完成 2D 圖像上的**單純物體辨識**測試。 |
| **W7** | **座標系統轉換開發 I** | [✅] 實作圖像座標 $\rightarrow$ Go2 本體座標的轉換邏輯，進行初步校正與誤差評估。 |
| **W8** | **座標系統轉換開發 II** | [✅] 整合 `tf2` 完成本體座標 $\rightarrow$ 世界座標的轉換，完成視覺系統到導航系統的初步串接。 |

### 第 3 個月：系統整合與 Web 介面

| 週次 | 任務重點 | 成果里程碑 |
| :--- | :--- | :--- |
| **W9** | **尋物邏輯與流程控制** | [✅] 實作完整的尋物狀態機 (巡邏 $\rightarrow$ 掃描 $\rightarrow$ 鎖定 $\rightarrow$ 導航)；完成核心後端邏輯。 |
| **W10** | **Web 介面雛形開發** | [✅] 建立 Web 介面原型，實作 ROS2 影像與地圖數據的顯示。 |
| **W11** | **使用者測試與回饋** | [✅] 進行內部使用者測試 (模擬高齡者)，收集回饋並進行介面優化與功能微調。 |
| **W12** | **系統穩定性與優化** | [✅] 進行長時間 (如 1 小時) 連續尋物運行測試，進行邊界案例與效能優化。 |

### 第 4 個月：最終準備與文件撰寫

| 週次 | 任務重點 | 成果里程碑 |
| :--- | :--- | :--- |
| **W13** | **Demo 情境準備與演練** | [✅] 準備 4 個 Demo 情境的環境，演練 Plan A/B/C 應變方案，錄製展示影片。 |
| **W14-15** | **文件撰寫與簡報準備** | [✅] 完成所有專題文件撰寫、簡報製作與口頭報告演練。 |
| **W16** | **最終檢查** | [✅] 所有功能最終測試，文件與程式碼最終整理。 |

---

## IV. 風險管理與應對方案 (Plan A/B/C)

| 風險等級 | 風險項目 | 緩解措施 (開發期) | 應對方案 (Demo 期) |
| :--- | :--- | :--- | :--- |
| **🔴 高** | **座標轉換誤差過大** | 增加校正點位與次數；若實機困難，則在 W7/W8 主攻模擬器校正。 | **Plan B：** Demo 時機器狗導航到**大致區域**，並在 Web 介面標示** VLM 圖像座標**，口頭說明轉換流程。 |
| **🔴 高** | **Isaac Sim 學習曲線** | 預留 W4 完整一週時間專門學習；團隊內指定一名核心成員負責 Sim 相關任務。 | **Plan C：** 若模擬器開發受阻，則直接使用實機 ROS2 + SLAM + Nav2 作為最低可行方案。 |
| **🟡 中** | **VLM API 額度/延遲** | 開發本地快取機制；調整 VLM 呼叫頻率；優化影像壓縮。 | **Plan B：** 若網路延遲，改用預錄的 VLM 辨識結果與實機導航結合。 |
| **🟡 中** | **實機過熱/故障** | 模擬器作為主要開發環境；設定 Go2 連續運行時間限制。 | **Plan B/C：** 實機僅展示基本移動與 SLAM；核心尋物功能在模擬器或影片中展示。 |

---

## V. 資源與規格確認清單

| 項目 | 狀態 | 修正建議 | 負責人 | 期限 |
| :--- | :--- | :--- | :--- | :--- |
| **GPU 伺服器** | RTX 4080 | 需確認 RAM 提升至 **32GB+**，儲存空間 **100GB+**。 | ROY | W1 |
| **Gemini VLM API** | Waiting List | 立即追蹤狀態，申請開發額度 (目標 10K 次/月)。 | (指定成員) | W1 |
| **第三人稱視角** | **已廢棄/降級** | 專注於 Go2 內建感測器 (LiDAR/Camera) 的第一人稱方案。 | (所有成員) | W1 |
| **必讀文檔** | 待確認 | Go2 SDK、Go2 Omniverse、Gemini Robotics 文檔必須在 W1 內讀完。 | (所有成員) | W1 |

---

## VI. 總結與提醒

此修正計畫將專注於整合 **ROS2/Nav2/Isaac Sim/Gemini VLM** 這四個獨立且強大的組件，避免了「開發模擬器與 SDK 串接」這個不存在的需求，大大提高了專案成功的機率。

**成功關鍵：**

1.  **快速修正技術認知**，特別是 Isaac Sim 的使用方式。
2.  **成功實作座標轉換 (W7-W8)**，這是連結視覺與導航的唯一橋樑。
3.  **嚴格遵守 4 個月時程**，並準備好 Plan B/C 以應對高風險技術挑戰。

祝專題順利！