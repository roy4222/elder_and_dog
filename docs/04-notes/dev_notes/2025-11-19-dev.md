# 2025-11-19 Go2 機器人開發計畫

## 🎯 核心目標（4 小時）
- 修復昨日發現的環境依賴問題  
- 成功連接實體 Go2 機器人  
- 驗證導航功能可正常運作  

---

## ⏱️ 時程安排

### 第 1 小時：環境修復與驗證
- **目標**：解決 submodule 與 Python 依賴問題  
- **步驟**：
  1. 初始化 aioice submodule：`git submodule update --init --recursive`  
  2. 安裝缺失套件：`uv pip install pydub open3d`  
  3. 重新編譯 ROS2 套件：`colcon build --packages-select go2_robot_sdk speech_processor lidar_processor`  
  4. 建立 `setup_ros.sh` 以固定啟動順序  
  5. 在不連機器人的狀態下進行 import 檢查  
- **驗收標準**：
  - ✅ aioice 目錄完整  
  - ✅ pydub / open3d 安裝成功  
  - ✅ 編譯過程無錯誤  
  - ✅ 啟動時無依賴錯誤  

### 第 2 小時：實體機器人連接測試
- **目標**：建立穩定的實機通訊  
- **步驟**：
  1. 透過手機 App 取得機器人 IP 並 `ping` 測試  
  2. 設定 `ROBOT_IP`、`CONN_TYPE=webrtc`  
  3. 啟動驅動：`ros2 launch go2_robot_sdk robot.launch.py slam:=false nav2:=false rviz2:=true`  
  4. 確認 `joint_states/imu/point_cloud2/camera` 等 topic 正常  
  5. 在 RViz 檢查模型、點雲與 TF 樹  
  6. （選用）發送測試速度指令  
- **驗收標準**：
  - ✅ 感測器 topic 正常  
  - ✅ RViz 顯示完整  
  - ✅ 無連線中斷或節點崩潰  

### 第 3 小時：SLAM + Nav2 驗證
- **目標**：確認建圖與導航流程  
- **步驟**：
  1. 啟動完整導航堆疊：`ros2 launch go2_robot_sdk robot.launch.py slam:=true nav2:=true rviz2:=true`  
  2. 確認 Nav2 lifecycle nodes 進入 active  
  3. 手動遙控建立 2x2 內的地圖並保存（SlamToolboxPlugin）  
  4. 使用 2D Pose Estimate 及 Nav Goal 測試 2–3 次  
  5. （選用）啟動 `search_logic` 巡邏節點  
- **驗收標準**：
  - ✅ SLAM 能建圖  
  - ✅ Nav2 成功規劃與導航  
  - ✅ 至少 2–3 次成功導航紀錄  

### 第 4 小時：問題排查與文檔記錄
- **目標**：建立重現流程與文件  
- **步驟**：
  1. 撰寫測試報告：`docs/04-notes/dev_notes/2025-11-18-connection-test.md`  
  2. 進行一次冷啟動完整驗證  
  3. 建立 `start_go2_navigation.sh` 快速啟動腳本  
  4. 完成測試檢查清單與下一步規劃  
- **產出**：
  - 測試報告  
  - 快速啟動腳本  
  - 檢查清單與問題記錄  

---

## 🔧 需要建立的檔案
- `~/setup_ros.sh`：統一環境變數設定順序  
- `~/start_go2_navigation.sh`：一鍵啟動導航系統  
- `docs/04-notes/dev_notes/2025-11-18-connection-test.md`：測試報告  
- `~/go2_test_checklist.md`：系統化檢查項目  

---

## ⚠️ 關鍵注意事項
- 環境變數執行順序：ROS ➜ 虛擬環境 ➜ workspace  
- WebRTC 單連線限制：連線前關閉手機 App  
- WSL2 路徑：Windows 路徑需換成 `/mnt/c/...`  
- SLAM 建圖時需慢速移動，避免計算過載  

---

## 🎯 最低成功標準
- ✅ 環境完全正常（無依賴錯誤）  
- ✅ 能連接實機並接收感測器數據  
- ✅ Nav2 至少完成一次成功導航  

> 準備好後依序執行以上計畫，並即時記錄所有問題與調整。
